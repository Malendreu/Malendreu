<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CV Narratif</title>
  <style>
    body {
      background-image: url('Room.png'); /* Image de fond */
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      font-family: 'MS Gothic', Tahoma, Geneva, Verdana, sans-serif;
      color: #E6E6FA;
      max-width: 750px;
      margin: 0px auto;
      padding: 20px;
      border-radius: 10px;
      background-color: rgba(0, 0, 0, 0.6); /* fallback */
    }
    .draggable {
      outline: 2px dashed rgba(255, 255, 255, 0.4);
      cursor: move;
    }
    #interactive-img, #interactive-img2 {
      position: fixed;
      width: 80px;
      cursor: pointer;
      z-index: 10;
      background: none;
      border: none;
      outline: none;
      transition: transform 0.3s ease;
    }
    #interactive-img {
      top: 30px;
      left: 367px;
      transform: rotateY(22deg) rotateX(5deg);
    }
    #interactive-img2 {
      top: 297px;
      left: 1043px;
    }
    #interactive-img:hover, #interactive-img2:hover {
      transform: rotateY(0deg) rotateX(0deg) perspective(900px);
    }
    .tooltip-container {
      position: relative;
      display: inline-block;
    }
    .tooltip-text {
      visibility: hidden;
      width: 220px;
      color: #E6E6FA;
      font-size: 1.5rem; 
      font-weight: bold;
      text-align: center;
      padding: 8px;
      border-radius: 6px;
      position: absolute;
      bottom: 34px;
      left: 365%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.4s;
      z-index: 10;
      pointer-events: none;
    }
    .tooltip-container:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
    #popup-modal, #popup-modal-books, #popup-modal-jeu {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      padding: 20px;
      border-radius: 10px;
      max-width: 80%;
      max-height: 80vh;
      overflow: auto;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    #popup-modal img, #popup-modal-books img, #popup-modal-jeu img {
      max-width: 100%;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 2rem;
      color: white;
      cursor: pointer;
      user-select: none;
    }
    .close-btn:hover {
      color: #ff4d4d;
    }
    #game-box {
      position: relative;
      margin: 20px auto;
      max-width: 800px;
      padding: 20px;
      backdrop-filter: blur(3px);
      -webkit-backdrop-filter: blur(3px);
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0);
    }
    #choices {
      display: none;
    }
    button {
      background: #4CAF50;
      border: none;
      padding: 8px 10px;
      margin: 2px 8px 5px 0;
      border-radius: 5px;
      color: #E6E6FA;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
    }
    button:hover {
      background: #45a049;
    }
    #story p {
      font-size: 1.2rem;
      font-weight: bold;
      line-height: 1.6;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- Modales -->
  <div id="popup-modal-books">
    <span class="close-btn" id="popup-close-books">&times;</span>
    <img src="Réalisations.png" alt="Popup image" />
  </div>

  <div id="popup-modal">
    <span class="close-btn" id="popup-close">&times;</span>
    <img src="Réalisations.png" alt="Popup image" />
  </div>

  <div id="popup-modal-jeu">
    <span class="close-btn" id="popup-close-jeu">&times;</span>
    <img src="Réalisations.png" alt="Projet jeu" />
  </div>

  <!-- Images interactives avec tooltips -->
  <div class="tooltip-container" id="tooltip-books">
    <img src="Books.png" id="interactive-img" />
    <div class="tooltip-text">Réalisations</div>
  </div>

  <div class="tooltip-container" id="tooltip-jeu">
    <img src="jeu.png?v=2" id="interactive-img2" />
    <div class="tooltip-text">Projet Jeu</div>
  </div>

  <!-- Box de jeu -->
  <div id="game-box">
    <div id="story"></div>
    <div id="choices" class="choice"></div>
  </div>

  <!-- Script -->
  <script>
    const storyText = {
      start: {
        text: `Bienvenue sur mon CV interactif ! Explorez le bureau pour découvrir mon parcours.`,
        choices: [
          { text: "Mes compétences", next: "skills" },
          { text: "Mes projets réalisés", next: "projects" }
        ]
      },
      skills: {
        text: `Voici mes compétences principales :
        - Conception de mécaniques de jeu.
        - Design narratif.
        - Gestion d'équipes créatives.
        - Développement de prototypes.
        - Enseignement en Game Design.

        Souhaitez-vous écouter une présentation audio de mes compétences ?`,
        choices: [
          { text: "Oui", next: "audio" },
          { text: "Retour", next: "start" }
        ]
      },
      audio: {
        text: `Voici un enregistrement audio qui résume mes compétences. Écoutez-le pour plus de détails.`,
        audio: true,
        audioSrc: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
        choices: [
          { text: "Retour aux compétences", next: "skills" },
          { text: "Voir mes projets", next: "projects" }
        ]
      },
      projects: {
        text: `Voici quelques projets marquants auxquels j'ai participé :
        - Lead Designer pour Need for Speed.
        - Design de jeu pour Scooby-Doo.
        - Travail sur Thomas & Friends Big Adventure.
        
        Voulez-vous voir une vidéo d'un de mes projets ?`,
        choices: [
          { text: "Oui", next: "video" },
          { text: "Retour", next: "start" }
        ]
      },
      video: {
        text: `Regardez cette vidéo d'un de mes projets récents.`,
        video: true,
        videoSrc: "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm",
        choices: [
          { text: "Retour aux projets", next: "projects" },
          { text: "Fin", next: "end" }
        ]
      },
      end: {
        text: `Merci d'avoir exploré mon CV interactif ! N'hésitez pas à me contacter pour plus d'infos.`,
        choices: []
      }
    };

    const storyEl = document.getElementById('story');
    const choicesEl = document.getElementById('choices');

    function renderNode(nodeKey) {
      const node = storyText[nodeKey];
      storyEl.innerHTML = '';
      choicesEl.innerHTML = '';

      // Texte avec retours à la ligne
      let paragraphs = node.text.split('\n').map(p => `<p>${p}</p>`).join('');
      storyEl.innerHTML = paragraphs;

      // Audio
      if (node.audio) {
        const audio = document.createElement('audio');
        audio.controls = true;
        audio.src = node.audioSrc;
        audio.className = "media";
        storyEl.appendChild(audio);
      }

           // Vidéo
      if (node.video) {
        const video = document.createElement('video');
        video.controls = true;
        video.src = node.videoSrc;
        video.className = "media";
        storyEl.appendChild(video);
      }

      // Boutons choix
      node.choices.forEach(choice => {
        const button = document.createElement('button');
        button.innerText = choice.text;
        button.onclick = () => renderNode(choice.next);
        choicesEl.appendChild(button);
      });
    }

    // Initialisation avec le premier texte
    renderNode('start');

    // Fonction pour ouvrir les modales
    const openModal = (modalId) => {
      document.getElementById(modalId).style.display = "flex";
    };

    // Fonction pour fermer les modales
    const closeModal = (modalId) => {
      document.getElementById(modalId).style.display = "none";
    };

    // Gestion des clics sur les images interactives
    document.getElementById('interactive-img').addEventListener('click', () => openModal('popup-modal-books'));
    document.getElementById('interactive-img2').addEventListener('click', () => openModal('popup-modal-jeu'));

    // Fermeture des modales
    document.getElementById('popup-close').addEventListener('click', () => closeModal('popup-modal'));
    document.getElementById('popup-close-books').addEventListener('click', () => closeModal('popup-modal-books'));
    document.getElementById('popup-close-jeu').addEventListener('click', () => closeModal('popup-modal-jeu'));
  </script>
</body>
</html>
